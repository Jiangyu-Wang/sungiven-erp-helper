<template>
  <div class="dashboard">
    <header class="page-header">
      <h1>è¶…å¸‚ä»ªè¡¨æ¿</h1>
      <p>å®æ—¶ç›‘æ§æ‚¨çš„è¶…å¸‚è¿è¥æ•°æ®</p>
    </header>

    <MetricCards :cards="metricCards" />

    <section class="grid">
      <TrendChart class="panel" />
      <HotRanking class="panel" :items="hotItems" />
    </section>

    <CategoryPerformanceTable class="panel" :rows="categoryRows" />
  </div>
</template>

<script setup lang="ts">
import CategoryPerformanceTable from "./CategoryPerformanceTable.vue"
import HotRanking from "./HotRanking.vue"
import MetricCards from "./MetricCards.vue"
import TrendChart from "./TrendChart.vue"

const metricCards = [
  { key: "sales", title: "ä»Šæ—¥é”€å”®é¢", value: "Â¥45,678", delta: "+12.5%", deltaClass: "pos", icon: "Â¥", iconBg: "#e8f0ff", iconColor: "#2563eb" },
  { key: "orders", title: "è®¢å•æ•°é‡", value: "1,234", delta: "+8.2%", deltaClass: "pos", icon: "ğŸ›’", iconBg: "#ecfbf2", iconColor: "#0b9b51" },
  { key: "stock", title: "åº“å­˜å•†å“", value: "5,678", delta: "-3.1%", deltaClass: "neg", icon: "ğŸ“¦", iconBg: "#fff3e8", iconColor: "#f26d21" },
  { key: "basket", title: "å¹³å‡å®¢å•ä»·", value: "Â¥37", delta: "+5.8%", deltaClass: "pos", icon: "ğŸ“ˆ", iconBg: "#f2eaff", iconColor: "#7c3aed" },
  { key: "rating", title: "Googleè¯„åˆ†", value: "4.6", delta: "+0.2", deltaClass: "pos", icon: "â­", iconBg: "#fff9e6", iconColor: "#d97706" },
  { key: "traffic", title: "ä»Šæ—¥å®¢æµé‡", value: "2,456", delta: "+15.3%", deltaClass: "pos", icon: "ğŸ‘¥", iconBg: "#eef2ff", iconColor: "#4f46e5" },
  { key: "member", title: "ä¼šå‘˜é”€å”®å æ¯”", value: "68%", delta: "+3.5%", deltaClass: "pos", icon: "ğŸ’³", iconBg: "#fce7f3", iconColor: "#db2777" },
  { key: "repeat", title: "å¤è´­ç‡", value: "72%", delta: "+4.2%", deltaClass: "pos", icon: "ğŸ”", iconBg: "#ecfeff", iconColor: "#0f766e" },
]

const hotItems = [
  { rank: 1, name: "é²œç‰›å¥¶", allStore: "12,500", store: "1,250", sales: "Â¥18,750", growth: "15%", progress: "10%" },
  { rank: 2, name: "é¢åŒ…", allStore: "10,800", store: "980", sales: "Â¥9,800", growth: "12%", progress: "9.1%" },
  { rank: 3, name: "çŸ¿æ³‰æ°´", allStore: "9,200", store: "856", sales: "Â¥2,568", growth: "8%", progress: "9.3%" },
  { rank: 4, name: "é¸¡è›‹", allStore: "8,600", store: "745", sales: "Â¥11,175", growth: "5%", progress: "8.7%" },
  { rank: 5, name: "æ°´æœ", allStore: "7,500", store: "632", sales: "Â¥15,800", growth: "20%", progress: "8.4%" },
  { rank: 6, name: "é…¸å¥¶", allStore: "6,800", store: "578", sales: "Â¥8,670", growth: "18%", progress: "8.5%" },
  { rank: 7, name: "æ–¹ä¾¿é¢", allStore: "6,200", store: "520", sales: "Â¥3,120", growth: "6%", progress: "8.4%" },
  { rank: 8, name: "é£Ÿç”¨æ²¹", allStore: "5,900", store: "485", sales: "Â¥9,700", growth: "10%", progress: "8.2%" },
  { rank: 9, name: "è–¯ç‰‡", allStore: "5,400", store: "450", sales: "Â¥4,500", growth: "14%", progress: "8.3%" },
  { rank: 10, name: "æ´—å‘æ°´", allStore: "5,100", store: "420", sales: "Â¥8,400", growth: "7%", progress: "8.2%" },
]

const categoryRows = [
  { name: "ç”Ÿé²œé£Ÿå“", sales: "Â¥125.6k", cost: "Â¥88.2k", profit: "Â¥37.4k", margin: "29.8%", target: "Â¥120.0k", achieve: "104.7%", status: "good" },
  { name: "æ—¥ç”¨ç™¾è´§", sales: "Â¥98.5k", cost: "Â¥65.8k", profit: "Â¥32.7k", margin: "33.2%", target: "Â¥100.0k", achieve: "98.5%", status: "warn" },
  { name: "é¥®æ–™é…’æ°´", sales: "Â¥86.3k", cost: "Â¥60.4k", profit: "Â¥25.9k", margin: "30.0%", target: "Â¥80.0k", achieve: "107.9%", status: "good" },
  { name: "ä¼‘é—²é›¶é£Ÿ", sales: "Â¥72.8k", cost: "Â¥45.5k", profit: "Â¥27.3k", margin: "37.5%", target: "Â¥75.0k", achieve: "97.1%", status: "warn" },
  { name: "ç²®æ²¹è°ƒå‘³", sales: "Â¥64.2k", cost: "Â¥48.8k", profit: "Â¥15.4k", margin: "24.0%", target: "Â¥65.0k", achieve: "98.8%", status: "warn" },
  { name: "ä¸ªæŠ¤ç¾å¦†", sales: "Â¥55.9k", cost: "Â¥35.2k", profit: "Â¥20.7k", margin: "37.0%", target: "Â¥50.0k", achieve: "111.8%", status: "good" },
]
</script>

<style scoped>
.dashboard {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.page-header h1 {
  font-size: 26px;
  margin: 0 0 6px;
}

.page-header p {
  margin: 0;
  color: #64748b;
  font-size: 14px;
}

.grid {
  display: grid;
  grid-template-columns: minmax(0, 1.6fr) minmax(0, 1fr);
  gap: 16px;
}

:deep(.panel) {
  background: #fff;
  border-radius: 16px;
  padding: 16px;
  border: 1px solid rgba(226, 232, 240, 0.8);
  box-shadow: 0 3px 10px rgba(15, 23, 42, 0.04);
}

:deep(.panel-header) {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 14px;
}

:deep(.panel-header h2) {
  margin: 0;
  font-size: 16px;
}

@media (max-width: 1100px) {
  .grid {
    grid-template-columns: 1fr;
  }
}
</style>
